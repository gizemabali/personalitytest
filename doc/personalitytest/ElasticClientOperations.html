<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.7) on Sat Nov 28 19:16:11 TRT 2020 -->
<title>ElasticClientOperations</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-11-28">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ElasticClientOperations";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":9,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ElasticClientOperations.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">personalitytest</a></div>
<h2 title="Class ElasticClientOperations" class="title">Class ElasticClientOperations</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>personalitytest.ElasticClientOperations</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>@Component
public class <span class="typeNameLabel">ElasticClientOperations</span>
extends java.lang.Object</pre>
<div class="block">This is a component class which is used to perform elastic queries over given elastic indices. It saves answers of
 the questions which are sent by the user according to its nickname  or searchs
 for questions details or answers that are sent by the users.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>gizemabali</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#closeClient()">closeClient</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>com.google.gson.JsonArray</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAnswers(java.lang.String,java.lang.String)">getAnswers</a></span>&#8203;(java.lang.String&nbsp;nickname,
          java.lang.String&nbsp;indexName)</code></th>
<td class="colLast">
<div class="block">This method gets answers sent by the user of the given nickname from the index of the given indexName.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>com.google.gson.JsonObject</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCategories(java.lang.String)">getCategories</a></span>&#8203;(java.lang.String&nbsp;indexName)</code></th>
<td class="colLast">
<div class="block">This method is used to get categories from the given index of indexName in elastic search.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentDate()">getCurrentDate</a></span>()</code></th>
<td class="colLast">
<div class="block">This method creates the current date according to the date format .</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="ElasticClientOperations.html" title="class in personalitytest">ElasticClientOperations</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getInstance()">getInstance</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>com.google.gson.JsonArray</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getQuestionDetails(java.lang.String,java.lang.String)">getQuestionDetails</a></span>&#8203;(java.lang.String&nbsp;category,
                  java.lang.String&nbsp;indexName)</code></th>
<td class="colLast">
<div class="block">This method is used to get question details which is related to the given category from the given index of
 indexName in elastic search.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#indexDocument(java.lang.String,com.google.gson.JsonObject,java.lang.String)">indexDocument</a></span>&#8203;(java.lang.String&nbsp;indexName,
             com.google.gson.JsonObject&nbsp;answerObj,
             java.lang.String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">This method is used to index then given answerObj documents to the given index using the given id.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>org.springframework.http.ResponseEntity&lt;java.lang.String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveAnswerDetails(java.lang.String,com.google.gson.JsonObject,java.lang.String)">saveAnswerDetails</a></span>&#8203;(java.lang.String&nbsp;category,
                 com.google.gson.JsonObject&nbsp;answerDetailsObj,
                 java.lang.String&nbsp;indexName)</code></th>
<td class="colLast">
<div class="block">This method is used to save answer details of the questions which is related to the given category to the index
 of the given indexName.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setClient(org.elasticsearch.client.RestHighLevelClient)">setClient</a></span>&#8203;(org.elasticsearch.client.RestHighLevelClient&nbsp;restClient)</code></th>
<td class="colLast">
<div class="block">set client</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#validateAndCreateAnswerDocument(com.google.gson.JsonObject,com.google.gson.JsonObject,com.google.gson.JsonObject)">validateAndCreateAnswerDocument</a></span>&#8203;(com.google.gson.JsonObject&nbsp;answerDetailsObj,
                               com.google.gson.JsonObject&nbsp;responseObj,
                               com.google.gson.JsonObject&nbsp;answerObj)</code></th>
<td class="colLast">
<div class="block">This method is used to validate answer details that come from the users and at the same time it creates the
 answer document that will be saved to elasticsearch.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="setClient(org.elasticsearch.client.RestHighLevelClient)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setClient</h4>
<pre class="methodSignature">@Autowired
public&nbsp;void&nbsp;setClient&#8203;(org.elasticsearch.client.RestHighLevelClient&nbsp;restClient)</pre>
<div class="block">set client</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>restClient</code> - </dd>
</dl>
</li>
</ul>
<a id="closeClient()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeClient</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;closeClient()</pre>
</li>
</ul>
<a id="getInstance()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre class="methodSignature">public static&nbsp;<a href="ElasticClientOperations.html" title="class in personalitytest">ElasticClientOperations</a>&nbsp;getInstance()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>singleton ElasticClientOperations instance.</dd>
</dl>
</li>
</ul>
<a id="getCategories(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCategories</h4>
<pre class="methodSignature">public&nbsp;com.google.gson.JsonObject&nbsp;getCategories&#8203;(java.lang.String&nbsp;indexName)
                                         throws java.lang.Exception</pre>
<div class="block">This method is used to get categories from the given index of indexName in elastic search. It uses an term
 aggregation builder <code>TermsAggregationBuilder</code> to get distinct categories.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>indexName</code> - it is the name of the index which will be searched.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a json object that has categories.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a id="getQuestionDetails(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQuestionDetails</h4>
<pre class="methodSignature">public&nbsp;com.google.gson.JsonArray&nbsp;getQuestionDetails&#8203;(java.lang.String&nbsp;category,
                                                    java.lang.String&nbsp;indexName)
                                             throws java.lang.Exception</pre>
<div class="block">This method is used to get question details which is related to the given category from the given index of
 indexName in elastic search. It searches for the questions of the given category and returns them with their
 question types  and their options .</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>category</code> - this information indicates question category to group all questions.</dd>
<dd><code>indexName</code> - it is the name of the index which will be searched.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a json array which stores all questions of the given category.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a id="saveAnswerDetails(java.lang.String,com.google.gson.JsonObject,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveAnswerDetails</h4>
<pre class="methodSignature">public&nbsp;org.springframework.http.ResponseEntity&lt;java.lang.String&gt;&nbsp;saveAnswerDetails&#8203;(java.lang.String&nbsp;category,
                                                                                   com.google.gson.JsonObject&nbsp;answerDetailsObj,
                                                                                   java.lang.String&nbsp;indexName)
                                                                            throws java.lang.Exception</pre>
<div class="block">This method is used to save answer details of the questions which is related to the given category to the index
 of the given indexName.
 
 Saving operation can or cannot be performed according to the following conditions.
 <ul>
 <li>First, it is checked that the answer details object has nickname attribute
 . If it doesn't have it, error response is returned to the user.</li>
 <li>Secondly, answer details object is controlled if all questions are answered (they don't have empty answers)
 and answer object to index is created.</li>
 <li>In order to save the answers, answers of the questions that are related to the given category must be sent
 first time. In order to control it, a search question is sent to the elastic index. If any error occur, error
 response is returned to the user.</li>
 <li>If elastic operations cannot be performed the answers cannot be saved.</li>
 <li>Otherwise, the answers will be saved to the index related to the given indexName.</li>
 </ul></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>category</code> - this information indicates question category to group all questions.</dd>
<dd><code>answerDetailsObj</code> - it is the object which has the answers and the questions.</dd>
<dd><code>indexName</code> - it is the name of the index which will be searched.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a json object that has the information of the saving operation.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a id="validateAndCreateAnswerDocument(com.google.gson.JsonObject,com.google.gson.JsonObject,com.google.gson.JsonObject)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validateAndCreateAnswerDocument</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;validateAndCreateAnswerDocument&#8203;(com.google.gson.JsonObject&nbsp;answerDetailsObj,
                                               com.google.gson.JsonObject&nbsp;responseObj,
                                               com.google.gson.JsonObject&nbsp;answerObj)</pre>
<div class="block">This method is used to validate answer details that come from the users and at the same time it creates the
 answer document that will be saved to elasticsearch.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>answerDetailsObj</code> - it is the object of answer details from the user by requests.</dd>
<dd><code>responseObj</code> - it is the response object that will be sent to the user.</dd>
<dd><code>answerObj</code> - it is the object of the document that will be save to index.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a bool value that indicates if the answers are valid.</dd>
</dl>
</li>
</ul>
<a id="indexDocument(java.lang.String,com.google.gson.JsonObject,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexDocument</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;indexDocument&#8203;(java.lang.String&nbsp;indexName,
                                      com.google.gson.JsonObject&nbsp;answerObj,
                                      java.lang.String&nbsp;id)
                               throws java.lang.Exception</pre>
<div class="block">This method is used to index then given answerObj documents to the given index using the given id.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>indexName</code> - it is the name of the index that document will be indexed.</dd>
<dd><code>answerObj</code> - it is the answer object that will be indexed to the given index.</dd>
<dd><code>id</code> - it is the id of the document that will be used to index document into the given index.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a doc id from the elastic search</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a id="getCurrentDate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentDate</h4>
<pre class="methodSignature">public&nbsp;java.lang.String&nbsp;getCurrentDate()</pre>
<div class="block">This method creates the current date according to the date format .</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the created date format string value.</dd>
</dl>
</li>
</ul>
<a id="getAnswers(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getAnswers</h4>
<pre class="methodSignature">public&nbsp;com.google.gson.JsonArray&nbsp;getAnswers&#8203;(java.lang.String&nbsp;nickname,
                                            java.lang.String&nbsp;indexName)
                                     throws java.lang.Exception</pre>
<div class="block">This method gets answers sent by the user of the given nickname from the index of the given indexName.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nickname</code> - it is the nickname of the user which sends answers. nickname attribute must be unique and it is
                  also used to form index id.</dd>
<dd><code>indexName</code> - it is the name of the index which will be searched.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a json array that has all answers grouped by the category.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ElasticClientOperations.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
